<!DOCTYPE html>
<html lang="en">
  <head>
    <title></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
  </head>
  <body>
    <div class="pre">

    </div>
    <script src="./data.js"></script>
    <script>

      // data = data.payload.data
      let permission = '项目授权, 表授权'

      function setMap(arr = []) {
        let o = {}
        if (Array.isArray(arr)) {
          arr.map(item => {
            o[item.name + item.code] = setMap(item.children)
          })
          return o
        }
        
        return true
      }
      let mp = setMap(data)

      // permission = permission.replace(/\s+/g, '').split(',')
      // let auth = true, current = setMap(data)
      // permission.some(item => {
      //   current = current[item]
      //   auth = !!current
      //   return !current
      // })
      // console.log(permission, auth, mp)

      let pre = document.querySelector('.pre')
      document.createElement
      pre.innerHTML = '<pre>' + (JSON.stringify(mp, null, 2)) + '</pre>'
      



    </script>
  </body>
</html>